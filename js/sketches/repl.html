<html>
<head>
<link rel="stylesheet" href="/css/base.css" />
<script type="module">
import { Transcript } from "./transcript.js";
import { preact } from '../src/web/libs.js';
import { EvaluationSeq } from '../src/web/views/evaluations.js';
import { nexusFromWebSocket } from '../src/stupidrpc/websocket.js';

const nexus = await nexusFromWebSocket(
  'ws://mallet3.scsys.co.uk:4172/ws',
  { prefix: 'client:' }
)

const model = new Transcript({
  evaluations: await nexus.call('load', 'default'),
  save: async function (data) {
    await nexus.call('save', 'default', data.map(v => ({ code: v.code })))
  }
});

let view = new EvaluationSeq({ model });

preact.render(preact.h(view), document.body);
</script>
</head>
<body>
</body>
</html>
